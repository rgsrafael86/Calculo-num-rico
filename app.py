# -*- coding: utf-8 -*-
"""Untitled1.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1Zysl3jZVbl3xFu-S7xvInvIx29BkeAXF
"""

import streamlit as st
import pandas as pd
import numpy as np
from scipy.stats import linregress
import matplotlib.pyplot as plt

st.title("游늵 An치lise de Produ칞칚o x Di칙metro")

# --- Entrada de dados edit치vel ---
st.subheader("Entrada de dados")

# Caixas de texto para valores separados por v칤rgula
producoes_input = st.text_input("Produ칞칫es (separadas por v칤rgula)", "0,9077,20443,32649,47798,69231")
diametros_input = st.text_input("Di칙metros (separados por v칤rgula)", "190.70,188.20,186.35,183.88,181.40,178.20")

# Converter para listas num칠ricas
X = np.array([int(x.strip()) for x in producoes_input.split(",") if x.strip() != ""])
Y = np.array([float(y.strip()) for y in diametros_input.split(",") if y.strip() != ""])

# --- Mostrar tabela de dados ---
st.subheader("Tabela de dados coletados")
tabela_entrada = pd.DataFrame({
    "Produ칞칚o (unidades)": X,
    "Di칙metro (mm)": Y
})
st.table(tabela_entrada)

# --- Regress칚o linear ---
slope, intercept, r_value, p_value, std_err = linregress(X, Y)

# Classifica칞칚o da correla칞칚o
if r_value > 0.7:
    classificacao = "Altamente positiva"
elif r_value > 0.3:
    classificacao = "Positiva"
elif r_value > -0.3:
    classificacao = "Sem correla칞칚o linear"
elif r_value > -0.7:
    classificacao = "Negativa"
else:
    classificacao = "Altamente negativa"

# --- Resultados em tabela ---
st.subheader("Resultados da regress칚o e correla칞칚o")
tabela_resultados = pd.DataFrame({
    "Par칙metro": [
        "Intercepto (b)",
        "Coeficiente angular (a)",
        "Correla칞칚o (R)",
        "p-valor",
        "Erro padr칚o do slope",
        "Classifica칞칚o da correla칞칚o"
    ],
    "Valor": [
        intercept,
        slope,
        r_value,
        p_value,
        std_err,
        classificacao
    ]
})
st.table(tabela_resultados)

# --- Gr치fico ---
st.subheader("Gr치fico dos pontos e reta ajustada")
plt.scatter(X, Y, label="Dados medidos", color="blue")
plt.plot(X, intercept + slope*X, color="red", label="Reta ajustada")
plt.xlabel("Produ칞칚o (unidades)")
plt.ylabel("Di칙metro (mm)")
plt.legend()
st.pyplot(plt)